import url from 'url';
import packageInfo from './package.json';

/**
 * 获取基本URL
 */
function getBaseUrl() {
  if (process.env.NODE_ENV === 'production') {
    const { name, homepage } = packageInfo;

    if (homepage) {
      return url.parse(homepage).path;
    }
    if (name.startsWith('@')) {
      return name.substr(name.indexOf('/'));
    }
    return `/${name}`;
  }
  return '/';
}

export default {
  typescript: true,
  files: ['docs/**/*.mdx'],
  public: './docs/assets',
  base: getBaseUrl(),
  menu: [
    '开始',
    '样式定制',
    {
      name: 'API',
      menu: [
        'TabGroup',
        'Tab',
        'TabHeader',
        'TabHeaderItem',
        'TabContent',
        'TabPanel',
      ],
    },
  ],
};
